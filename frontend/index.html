<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI解题助手 - 智能拍题解答</title>
    
    <!-- Bootstrap 3 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css">
    
    <!-- Highlight.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
    
    <!-- 自定义样式 -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- SVG滤镜定义 - 手绘效果 -->
    <svg style="position: absolute; width: 0; height: 0;">
        <defs>
            <filter id="sketchy" x="-5%" y="-5%" width="110%" height="110%">
                <feTurbulence type="turbulence" baseFrequency="0.03" numOctaves="2" result="noise"/>
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="1.5" xChannelSelector="R" yChannelSelector="G"/>
            </filter>
        </defs>
    </svg>

    <!-- 顶部导航栏 -->
    <nav class="navbar navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">
                    <span class="brand-icon">
                        <!-- 手绘机器人图标 -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:32px;height:32px;stroke:#3a3a3a;">
                            <rect x="3" y="8" width="18" height="12" rx="2" transform="rotate(-1 12 14)"/>
                            <circle cx="8.5" cy="14" r="1.5"/>
                            <circle cx="15.5" cy="14" r="1.5"/>
                            <path d="M12 2v4"/>
                            <circle cx="12" cy="2" r="1.5"/>
                            <path d="M8 20v2M16 20v2"/>
                            <path d="M7 10h3M14 10h3"/>
                        </svg>
                    </span>
                    <span>AI解题助手</span>
                </a>
            </div>
            <div class="navbar-nav navbar-right">
                <!-- 搜题记录按钮 -->
                <a href="#" class="nav-link" id="historyBtn">
                    <!-- 手绘历史记录图标 -->
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                </a>
                <a href="#" class="nav-link" data-toggle="modal" data-target="#aboutModal">
                    <!-- 手绘信息图标 -->
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="16" x2="12" y2="12"/>
                        <line x1="12" y1="8" x2="12.01" y2="8"/>
                    </svg>
                </a>
            </div>
        </div>
    </nav>

    <!-- 全局浮动返回按钮 -->
    <div class="floating-back-btn" id="globalBackBtn" style="display: none;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 12H5"/>
            <path d="M12 19l-7-7 7-7"/>
        </svg>
        <span>返回</span>
    </div>

    <!-- 主内容区 -->
    <div class="main-wrapper">
        <!-- Hero区域 - 核心功能区 -->
        <div class="hero-section">
            <div class="container">
                <div class="hero-content">
                    <h1 class="hero-title">拍照搜题</h1>
                    <p class="hero-subtitle">AI智能识别，秒速解答</p>
                </div>

                <!-- 主功能按钮组 -->
                <div class="action-buttons-grid">
                    <!-- 拍照搜题按钮 -->
                    <div class="action-card camera-card" id="cameraCard">
                        <div class="card-icon">
                            <!-- 手绘相机图标 -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"/>
                                <circle cx="12" cy="13" r="4"/>
                                <path d="M17 9h1"/>
                            </svg>
                        </div>
                        <div class="card-title">拍照搜题</div>
                        <div class="card-desc">拍照上传题目</div>
                    </div>

                    <!-- 文字搜题按钮 -->
                    <div class="action-card text-card" id="textCard">
                        <div class="card-icon">
                            <!-- 手绘键盘图标 -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="2" y="6" width="20" height="12" rx="2"/>
                                <path d="M6 10h.01M10 10h.01M14 10h.01M18 10h.01"/>
                                <path d="M6 14h12"/>
                            </svg>
                        </div>
                        <div class="card-title">文字搜题</div>
                        <div class="card-desc">手动输入题目</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 输入区域（隐藏，点击后显示） -->
        <div class="input-section" id="inputSection" style="display: none;">
            <div class="container input-container">
                <!-- 图片上传区 -->
                <div class="upload-area" id="uploadArea" style="display: none;">
                    <div class="upload-preview" id="uploadPreview">
                        <div class="upload-placeholder">
                            <!-- 手绘上传图标 -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                <polyline points="17 8 12 3 7 8"/>
                                <line x1="12" y1="3" x2="12" y2="15"/>
                            </svg>
                            <p>点击或拖拽上传题目图片</p>
                            <span class="upload-hint">支持 JPG、PNG 格式，最大 10MB</span>
                        </div>
                        <img id="previewImage" class="preview-image" style="display: none;">
                    </div>
                    <input type="file" id="imageInput" accept="image/*" style="display: none;">
                    <div class="upload-actions" id="uploadActions" style="display: none;">
                        <button class="btn btn-primary btn-block" id="submitImage">
                            <!-- 手绘发送图标 -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px;stroke:white;vertical-align:middle;margin-right:8px;">
                                <line x1="22" y1="2" x2="11" y2="13"/>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                            </svg>
                            开始解题
                        </button>
                        <button class="btn btn-default btn-block" id="cancelImage">
                            <!-- 手绘关闭图标 -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px;stroke:#3a3a3a;vertical-align:middle;margin-right:6px;">
                                <line x1="18" y1="6" x2="6" y2="18"/>
                                <line x1="6" y1="6" x2="18" y2="18"/>
                            </svg>
                            取消
                        </button>
                    </div>
                </div>

                <!-- 文字输入区 -->
                <div class="text-input-area" id="textInputArea" style="display: none;">
                    <textarea id="problemInput" class="form-control" placeholder="请在此输入题目内容...&#10;&#10;例如：计算 (2x + 3)² 的展开式" rows="6"></textarea>
                    <div class="text-input-actions">
                        <button class="btn btn-default" id="cancelText">
                            <!-- 手绘返回图标 -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px;stroke:#3a3a3a;vertical-align:middle;margin-right:6px;">
                                <line x1="19" y1="12" x2="5" y2="12"/>
                                <polyline points="12 19 5 12 12 5"/>
                            </svg>
                            返回
                        </button>
                        <button class="btn btn-primary" id="submitText">
                            <!-- 手绘发送图标 -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px;stroke:white;vertical-align:middle;margin-right:8px;">
                                <line x1="22" y1="2" x2="11" y2="13"/>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                            </svg>
                            开始解题
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 结果展示区 -->
        <div class="result-section" id="resultSection" style="display: none;">
            <div class="container result-container">
                <div class="result-card">
                    <!-- 结果头部 -->
                    <div class="result-header">
                        <h3>
                            <!-- 手绘灯泡图标 -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:26px;height:26px;stroke:white;">
                                <path d="M9 18h6"/>
                                <path d="M10 22h4"/>
                                <path d="M12 2a7 7 0 00-4 12.7V17h8v-2.3A7 7 0 0012 2z"/>
                            </svg>
                            解答
                        </h3>
                    </div>

                    <!-- 解答内容 -->
                    <div class="result-answer-only">
                        <div class="answer-content" id="solutionText"></div>
                    </div>

                    <!-- 操作按钮 -->
                    <div class="result-actions">
                        <button class="btn btn-default" id="copyBtn">
                            <!-- 手绘复制图标 -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px;stroke:#3a3a3a;vertical-align:middle;margin-right:6px;">
                                <rect x="9" y="9" width="13" height="13" rx="2"/>
                                <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                            </svg>
                            复制答案
                        </button>
                        <button class="btn btn-default" id="newQuestionBtn">
                            <!-- 手绘刷新图标 -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px;stroke:#3a3a3a;vertical-align:middle;margin-right:6px;">
                                <polyline points="23 4 23 10 17 10"/>
                                <path d="M20.49 15a9 9 0 11-2.12-9.36L23 10"/>
                            </svg>
                            新题目
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 加载动画 -->
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-content">
                <div class="loading-spinner">
                    <!-- 现代旋转加载图标 -->
                    <svg viewBox="0 0 48 48" fill="none">
                        <circle cx="24" cy="24" r="20" stroke="rgba(255,255,255,0.15)" stroke-width="4"/>
                        <path d="M24 4a20 20 0 0 1 20 20" stroke="#f0f0f0" stroke-width="4" stroke-linecap="round">
                            <animateTransform attributeName="transform" type="rotate" from="0 24 24" to="360 24 24" dur="1s" repeatCount="indefinite"/>
                        </path>
                    </svg>
                </div>
                <p class="loading-text">AI正在思考中...</p>
                <p class="loading-hint">请稍候，正在生成详细解答</p>
            </div>
        </div>

        <!-- 搜题记录侧边栏 -->
        <div class="history-overlay" id="historyOverlay">
            <!-- 点击背景关闭 -->
            <div class="history-backdrop" id="historyBackdrop"></div>
            <div class="history-sidebar">
                <div class="history-header">
                    <h3>
                        <!-- 手绘历史图标 -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:24px;height:24px;stroke:#4a4a4a;vertical-align:middle;margin-right:8px;">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        搜题记录
                    </h3>
                    <button class="close-history" id="closeHistory">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:20px;height:20px;stroke:#666;">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </div>
                <div class="history-content" id="historyContent">
                    <!-- 搜题记录列表将在这里动态生成 -->
                    <div class="history-empty">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="width:48px;height:48px;stroke:#ccc;">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        <p>暂无搜题记录</p>
                    </div>
                </div>
                <div class="history-footer">
                    <button class="btn btn-default btn-block" id="clearHistory">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px;stroke:#666;vertical-align:middle;margin-right:6px;">
                            <polyline points="3 6 5 6 21 6"/>
                            <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                        </svg>
                        清空记录
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 关于模态框 -->
    <div class="modal fade" id="aboutModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">
                        <!-- 手绘机器人图标 -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:22px;height:22px;stroke:white;vertical-align:middle;margin-right:8px;">
                            <rect x="3" y="8" width="18" height="12" rx="2"/>
                            <circle cx="8.5" cy="14" r="1.5"/>
                            <circle cx="15.5" cy="14" r="1.5"/>
                            <path d="M12 2v4"/>
                            <circle cx="12" cy="2" r="1.5"/>
                        </svg>
                        关于AI解题助手
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="about-section">
                        <h5>
                            <!-- 手绘星星图标 -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px;stroke:#4a4a4a;vertical-align:middle;margin-right:8px;">
                                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                            </svg>
                            功能特点
                        </h5>
                        <ul>
                            <li>
                                <!-- 手绘勾选图标 -->
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px;stroke:#4a4a4a;vertical-align:middle;margin-right:12px;">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                拍照智能识别题目
                            </li>
                            <li>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px;stroke:#4a4a4a;vertical-align:middle;margin-right:12px;">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                文字输入快速解题
                            </li>
                            <li>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px;stroke:#4a4a4a;vertical-align:middle;margin-right:12px;">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                详细步骤解析
                            </li>
                            <li>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px;stroke:#4a4a4a;vertical-align:middle;margin-right:12px;">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                支持数学、物理、化学等多学科
                            </li>
                        </ul>
                    </div>
                    <div class="about-section">
                        <h5>
                            <!-- 手绘齿轮图标 -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="width:18px;height:18px;stroke:#4a4a4a;vertical-align:middle;margin-right:8px;">
                                <circle cx="12" cy="12" r="3"/>
                                <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
                            </svg>
                            配置信息
                        </h5>
                        <p class="config-info">
                            当前模型: <code id="currentModel">-</code>
                        </p>
                    </div>
                    <hr>
                    <p class="text-center text-muted">
                        <small>© 2026 AI解题助手 MVP版本</small>
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-block" data-dismiss="modal">知道了</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 底部信息 -->
    <footer class="footer">
        <div class="container text-center">
            <p>使用AI解题助手，学习更轻松</p>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    
    <!-- Bootstrap 3 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js"></script>
    
    <!-- Marked.js -->
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
    
    <!-- Highlight.js -->
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/highlight.min.js"></script>
    
    <!-- 自定义JS -->
    <script src="js/app.js"></script>
</body>
</html>
